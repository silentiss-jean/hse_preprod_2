<!DOCTYPE html>
<html lang="fr" data-theme="light">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Home Suivi Ã‰lec</title>

  <!-- Core tokens + composants (ne dÃ©pend pas du thÃ¨me) -->
  <link rel="stylesheet" href="style.hse.core.css">
  <link rel="stylesheet" href="style.hse.components.css">
  <link rel="stylesheet" href="style.hse.tokens.ui.css">

  <!-- Legacy / styles divers (peut contenir des rÃ¨gles "en dur") -->
  <!--link rel="stylesheet" href="style.css"-->

  <!-- ThÃ¨mes v4 (doit passer aprÃ¨s pour imposer les variables selon data-theme) -->
  <link rel="stylesheet" href="style.hse.themes.v4.css">
  <link rel="stylesheet" href="style.hse.themes.v3.aurora.overrides.css">

  <!-- Features -->
  <link rel="stylesheet" href="features/summary/summary.css">
  <link rel="stylesheet" href="features/summary/summary.tokens.css">
  <link rel="stylesheet" href="features/diagnostics/diagnostics.css">
  <link rel="stylesheet" href="features/migration/migration.css">
  <link rel="stylesheet" href="features/history/history.css">
  <link rel="stylesheet" href="features/generation/generation.css">
  <link rel="stylesheet" href="features/detection/detection.css">
  <link rel="stylesheet" href="features/customisation/customisation.css">
  <link rel="stylesheet" href="features/configuration/configuration.css">
</head>

<body>
  <header class="hse-header">
    <h1>âš¡ Home Suivi Ã‰lec</h1>

    <!-- Tabs : on rÃ©utilise les styles existants .subtab-btn -->
    <nav id="tabs" class="hse-tabs">
      <button type="button" class="subtab-btn active" data-tab="home" onclick="showTab('home')">ğŸ  Accueil</button>
      <button type="button" class="subtab-btn" data-tab="diagnostics" onclick="showTab('diagnostics')">ğŸ”§ Diagnostic</button>
      <button type="button" class="subtab-btn" data-tab="detection" onclick="showTab('detection')">ğŸ” DÃ©tection</button>
      <button type="button" class="subtab-btn" data-tab="configuration" onclick="showTab('configuration')">âš™ï¸ Configuration</button>
      <button type="button" class="subtab-btn" data-tab="customisation" onclick="showTab('customisation')">ğŸ¨ Customisation</button>
      <button type="button" class="subtab-btn" data-tab="generation" onclick="showTab('generation')">ğŸ§© GÃ©nÃ©ration cartes</button>
      <button type="button" class="subtab-btn" data-tab="migration" onclick="showTab('migration')">ğŸ”„ Migration capteurs</button>
      <button type="button" class="subtab-btn" data-tab="history" onclick="showTab('history')">ğŸ“Š Analyse de coÃ»ts</button>
    </nav>

  </header>

  <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
       ğŸ  ACCUEIL - RÃ‰SUMÃ‰ GÃ‰NÃ‰RAL
       â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
  <div id="home" class="tab-content active">

    <!-- Boutons d'actions (layout via classes, pas de style inline) -->
    <div class="actions-section hse-actions-row">
      <button id="refreshHome" class="btn btn-primary" type="button">ğŸ”„ Actualiser rÃ©sumÃ©</button>
      <button id="clearCache" class="btn btn-warn" type="button">ğŸ—‘ï¸ Vider cache</button>
      <button id="showCacheStats" class="btn btn-info" type="button">ğŸ“Š Stats cache</button>
    </div>

    <!-- Panneau stats cache -->
    <div id="cacheStatsPanel" class="hse-panel hse-panel-accent" hidden>
      <strong>ğŸ“Š Statistiques du cache</strong>
      <div id="cacheStatsContent">Chargement...</div>
    </div>

    <h2>RÃ©sumÃ© gÃ©nÃ©ral</h2>

    <div id="summaryCard" class="card">
      <div id="topBlocks" class="hse-summary-top-grid">
        <div id="instantaneBlock" class="hse-surface-card hse-panel hse-panel-accent hse-flex-1">
          <h3>Capteurs</h3>
          <p><strong>Total capteurs dÃ©tectÃ©s :</strong> <span id="totalCapteurs">-</span></p>
          <p><strong>Capteurs sÃ©lectionnÃ©s :</strong> <span id="actifsCapteurs">-</span></p>
          <p><strong>Capteurs sÃ©lectionnÃ©s (tous actifs) :</strong> <span id="instantaneInterne">- W</span></p>
          <p><strong id="externalTitle"></strong> <span id="externeCompact"></span> <abbr title="Valeur mesurÃ©e en temps rÃ©el, coÃ»t HT rÃ©el">*</abbr></p>
          <p><strong>Consommation actuelle non mesurÃ©e (Delta) :</strong> <span id="deltaPuissance">- W</span></p>
        </div>

        <div id="resumeGeneral" class="hse-surface-card hse-panel hse-panel-accent hse-flex-1">
          <h3>RÃ©sumÃ© gÃ©nÃ©ral</h3>
          <p><strong>Type contrat :</strong> <span id="typeContratSummary">-</span></p>
          <p><strong>Abonnement HT :</strong> <span id="abonnementHTSummary">-</span> â‚¬</p>
          <p><strong>Abonnement TTC :</strong> <span id="abonnementTTCSummary">-</span> â‚¬</p>

          <div id="blocFixe" hidden class="hse-mt-10">
            <p><strong>Prix du kWh HT :</strong> <span id="prixFixeHT">-</span> â‚¬</p>
            <p><strong>Prix du kWh TTC :</strong> <span id="prixFixeTTC">-</span> â‚¬</p>
          </div>

          <div id="blocHpHc" hidden class="hse-mt-10">
            <p><strong>Tarif HP HT :</strong> <span id="tarifHPHTSummary">-</span> â‚¬</p>
            <p><strong>Tarif HP TTC :</strong> <span id="tarifHPTTCSummary">-</span> â‚¬</p>
            <p><strong>Tarif HC HT :</strong> <span id="tarifHCHTSummary">-</span> â‚¬</p>
            <p><strong>Tarif HC TTC :</strong> <span id="tarifHCTTCSummary">-</span> â‚¬</p>
            <p><strong>Heures HC dÃ©but :</strong> <span id="heuresHPDebutSummary">-</span></p>
            <p><strong>Heures HC fin :</strong> <span id="heuresHPFinSummary">-</span></p>
          </div>

          <div id="tarifsSummary"></div>
          <p><strong>Dernier refresh :</strong> <span id="dernierRefresh">-</span></p>
        </div>
      </div>

      <!-- Backend-powered loading/error -->
      <div id="summaryContent"></div>

      <!-- Tables RÃ©sumÃ© -->
      <section id="summaryData" hidden>
        ...
      </section>
    </div>
  </div>   <!-- /#home -->


  <!-- AUTRES ONGLETS -->
  <div id="diagnostics" class="tab-content"></div>
  <div id="detection" class="tab-content"></div>
  <div id="configuration" class="tab-content"></div>
  <div id="customisation" class="tab-content"></div>
  <div id="generation" class="tab-content"></div>
  <div id="migration" class="tab-content"></div>

  <!-- HISTORY -->
  <div id="history" class="tab-content">
    <div id="history-app"></div>
  </div>

  <!-- SCRIPTS -->
  <script src="core/theme-bridge.js"></script>
  <script type="module" src="core/app.js"></script>
  <script type="module" src="core/router.js"></script>
</body>
</html>
